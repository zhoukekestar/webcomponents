<!DOCTYPE html>
<html>
<head>
  <title>template-mini demo</title>
  <script src='../../polymer/webcomponentsjs-0.7.23/webcomponents.js'></script>
  <link rel="import" href="index.html">
</head>
<body>
  <p>Simple Unit Test is
    <template-mini data-modal='{"items": [1, 2, 3, 4, 5, 6, 7, 8]}'>
      <a href="./test.html" repeat='i in items' style='margin-right: 10px;'>here.</a>
    </template-mini>
  </p>
  <template-mini id='tmplRepeat'>
    <script type='text/beforeUpdate'>
      this.convert1 = function(value) {
        return '(convert1: ' + value + ')';
      }
    </script>
    <script type='text/afterUpdate'>
      console.log('is updated!')
    </script>
    <p>tmpl-repeat</p>
    <ul>
      <li repeat='item in items'>{{index}}: {{item}}</li>
    </ul>
    <ul>
      <li repeat='item2 in items2'>{{convert1(convert0(index))}}: {{item2.name}} <span>{{item2.name}}</span> </li>
    </ul>
    <p data-preson='{{person.name}}' data-country='country: {{person.address.country}}'>{{person.name}}: {{person.address.country}} - {{person.address.province}} <small>{{person.address.time}}</small></p>

  </template-mini>

  <button onclick="repeat()">tmplRepeat</button>
  <script>

    var repeat = function() {
      tmplRepeat.setModal({
        items: ['a', 'b', 'c'],
        items2: [{name: 'name-a'}, {name: 'name-b'}],
        person: {
          name: 'name',
          address: {
            country: 'china',
            province: 'zhejiang',
            time: Date.now()
          }
        },
        convert0: function(value) {
          return '(convert0: ' + value + ')'
        }
      })
    }
  </script>
  <template-mini id='tmplIf'>
    <p>tmpl-if</p>
    <p if='show'>show is ture</p>
    <p else>show is false</p>
    <p if='obj.test[0].enabled'>obj.test[0].enabled is ture</p>
    <p if='name == "a"'>a is awesome</p>
    <p elseif='name === "b"'>b is interesting</p>
    <p else>your name is good..</p>
  </template-mini>
  <button onclick='tmplIf.setModal({show: true, name:"a"})'>tmplIf true</button>
  <button onclick='tmplIf.setModal({show: false, obj: {test: [{enabled: true}]}})'>tmplIf false</button>
  <script>
    var tmplRepeat = document.getElementById('tmplRepeat');
    var tmplIf = document.getElementById('tmplIf');
  </script>

  <h1>README.md examples:</h1>
  <ul>
    <li>
      <h2>repeat</h2>
      <template-mini data-modal='{"list": ["a", "b", "c"]}'>
        <ul repeat='item in list'>
          <li>{{index}}: {{item}}</li>
        </ul>
      </template-mini>
    </li>
    <li>
      <h2>if</h2>
      <template-mini data-modal='{"show": true}'>
        <p if='show'>Hi</p>
      </template-mini>
    </li>

    <li>
      <h2>elseif, else</h2>
      <template-mini data-modal='{"num": 3}'>
        <p if='num === 1'>num is one</p>
        <p elseif='num === 2'>num is two</p>
        <p else>num is greater than two</p>
      </template-mini>
    </li>
    <li>
      <h2>beforeUpdate</h2>
      <template-mini data-modal='{"time": 1480067606959}' id=abc>

        <p>date: {{formatDate(time)}}</p>
        <script type='text/beforeUpdate'>
          this.formatDate = function(num) {
            return (new Date(num)).toGMTString();
          }
          console.log('hi')
        </script>
      </template-mini>
    </li>
    <li>
      <h2>afterUpdate</h2>
      <template-mini data-modal='{}'>
        <button>sayhi</button>
        <script type="text/afterUpdate">
          this.querySelector('button').onclick = function() {
            alert('hi');
          }
        </script>
      </template-mini>
    </li>
  </ul>
</body>
</html>
